---
port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: :9090
proxy-groups:
- name: "\U0001F680 节点选择"
  type: select
  proxies:
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
  - "☯️ 故障转移"
  - DIRECT
- name: "☯️ 故障转移"
  type: fallback
  disable-udp: true
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
  interval: 300
  filter: "(新加坡|Singapore|台湾|Taiwan|香港|HK|Hong Kong|韩国|日本|Japan)"
- name: "\U0001F3AE 游戏人间"
  type: select
  proxies:
  - "☯️ 故障转移"
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
- name: "\U0001F4BC 勤勤恳恳"
  type: select
  proxies:
  - "☯️ 故障转移"
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
- name: "\U0001F916 人工智障"
  type: select
  proxies:
  - "☯️ 故障转移"
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
- name: "\U0001F680 手动切换"
  type: select
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
- name: "\U0001F4F2 电报消息"
  type: select
  proxies:
  - "\U0001F680 节点选择"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
  - DIRECT
- name: "\U0001F3A5 奈飞视频"
  type: select
  disable-udp: true
  proxies:
  - "\U0001F680 手动切换"
  use:
  - WgetCloud
- name: "\U0001F3A5 Disney"
  type: select
  disable-udp: true
  proxies:
  - "\U0001F680 手动切换"
  use:
  - WgetCloud
- name: "\U0001F3A5 HBO"
  type: select
  disable-udp: true
  proxies:
  - "\U0001F680 手动切换"
  use:
  - WgetCloud
- name: "\U0001F4FA 巴哈姆特"
  type: select
  disable-udp: true
  proxies:
  - "\U0001F680 手动切换"
  use:
  - WgetCloud
  filter: "(台|新北|彰化|TW|Taiwan)"
- name: "\U0001F4FA 哔哩哔哩"
  type: select
  disable-udp: true
  proxies:
  - "\U0001F3AF 全球直连"
  use:
  - WgetCloud
  filter: "(台|新北|彰化|TW|Taiwan|港|HK|Hong Kong)"
- name: "\U0001F4E2 谷歌FCM"
  type: select
  proxies:
  - DIRECT
  - "\U0001F680 节点选择"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
- name: Ⓜ️ 微软Bing
  type: select
  proxies:
  - DIRECT
  - "\U0001F680 节点选择"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
- name: Ⓜ️ 微软云盘
  type: select
  proxies:
  - DIRECT
  - "\U0001F680 节点选择"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
- name: Ⓜ️ 微软服务
  type: select
  proxies:
  - DIRECT
  - "\U0001F680 节点选择"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
- name: "\U0001F34E 苹果服务"
  type: select
  proxies:
  - DIRECT
  - "\U0001F680 节点选择"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
- name: "\U0001F3AE 游戏平台"
  type: select
  proxies:
  - DIRECT
  - "\U0001F680 节点选择"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
- name: "\U0001F3AF 全球直连"
  type: select
  proxies:
  - DIRECT
  - "\U0001F680 节点选择"
- name: "\U0001F41F 漏网之鱼"
  type: select
  proxies:
  - "\U0001F680 节点选择"
  - DIRECT
  - "\U0001F1ED\U0001F1F0 香港节点"
  - "\U0001F1E8\U0001F1F3 台湾节点"
  - "\U0001F1F8\U0001F1EC 狮城节点"
  - "\U0001F1EF\U0001F1F5 日本节点"
  - "\U0001F1FA\U0001F1F2 美国节点"
  - "\U0001F1F0\U0001F1F7 韩国节点"
  - "\U0001F680 手动切换"
- name: "\U0001F1ED\U0001F1F0 香港节点"
  type: select
  disable-udp: true
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
  filter: "(港|HK|Hong Kong)"
- name: "\U0001F1EF\U0001F1F5 日本节点"
  type: select
  disable-udp: true
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
  filter: "(日本|川日|东京|大阪|泉日|埼玉|沪日|深日|[^-]日|JP|Japan)"
- name: "\U0001F1FA\U0001F1F2 美国节点"
  type: select
  disable-udp: true
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
  filter: "(美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States)"
- name: "\U0001F1F8\U0001F1EC 狮城节点"
  type: select
  disable-udp: true
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
  filter: "(新加坡|坡|狮城|SG|Singapore)"
- name: "\U0001F1E8\U0001F1F3 台湾节点"
  type: select
  disable-udp: true
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
  filter: "(台|新北|彰化|TW|Taiwan)"
- name: "\U0001F1F0\U0001F1F7 韩国节点"
  type: select
  disable-udp: true
  use:
  - WgetCloud
  - 橘色云
  - Miaona!
  - STC
  filter: "(KR|Korea|KOR|首尔|韩|韓)"
script:
  shortcuts: # 可以在 rule 中引用
    quic: network == 'udp' and dst_port == 443 # 匹配 QUIC 协议
    udp-cn: network == 'udp' and geoip(dst_ip if dst_ip != '' else resolve_ip(host)) == 'CN' # 匹配发往 CN 的 UDP
    instagram-quic: network == 'udp' and dst_port == 443 and match_geosite('instagram') # 匹配 Instagram 的 QUIC
rules:
- SCRIPT,quic,REJECT
- SCRIPT,udp-cn,ProxyToCN
- "DOMAIN-KEYWORD,olelive,\U0001F680 节点选择"
- "RULE-SET,BiliBili,\U0001F4FA 哔哩哔哩"
- "RULE-SET,HBO,\U0001F3A5 HBO"
- "RULE-SET,TikTok,\U0001F680 手动切换"
- "RULE-SET,Blizzard,\U0001F3AE 游戏人间"
- "RULE-SET,OpenAI,\U0001F916 人工智障"
- "RULE-SET,DisneyPlus,\U0001F3A5 Disney"
- "RULE-SET,GoogleFCM,\U0001F4E2 谷歌FCM"
- RULE-SET,Bing,Ⓜ️ 微软Bing
- RULE-SET,OneDrive,Ⓜ️ 微软云盘
- RULE-SET,Microsoft,Ⓜ️ 微软服务
- "RULE-SET,Nintendo,\U0001F3AE 游戏平台"
- "RULE-SET,Steam,\U0001F3AE 游戏平台"
- "RULE-SET,Sony,\U0001F3AE 游戏平台"
- "RULE-SET,Origin,\U0001F3AE 游戏平台"
- "RULE-SET,Epic,\U0001F3AE 游戏平台"
- "RULE-SET,Bahamut,\U0001F4FA 巴哈姆特"
- "RULE-SET,Netflix,\U0001F3A5 奈飞视频"
- "RULE-SET,applications,\U0001F3AF 全球直连"
- DOMAIN,clash.razord.top,DIRECT
- DOMAIN,yacd.haishan.me,DIRECT
- RULE-SET,private,DIRECT
- "RULE-SET,icloud,\U0001F34E 苹果服务"
- "RULE-SET,apple,\U0001F34E 苹果服务"
- "RULE-SET,google,\U0001F680 节点选择"
- "RULE-SET,proxy,\U0001F680 节点选择"
- "RULE-SET,direct,\U0001F3AF 全球直连"
- RULE-SET,lancidr,DIRECT
- "RULE-SET,cncidr,\U0001F3AF 全球直连"
- "RULE-SET,telegramcidr,\U0001F4F2 电报消息"
- "GEOIP,CN,\U0001F3AF 全球直连"
- "MATCH,\U0001F41F 漏网之鱼"
p: &p {type: http, interval: 86400}
proxy-providers:
  WgetCloud:
    <<: *p
    override:
      additional-suffix: "『❤Wget』"
    url: http://jia.hdrly.top:25500/sub?target=clash&url=https%3A%2F%2Fbava8u2znaj6bdzzjnfb.wgetcloud.online%2Flink%2Fddbb4091-7222-3314-8227-8533c6566d46%3Ftarget%3Dclash%26list%3D1%26simple%3D1&config=https%3A%2F%2Fraw.githubusercontent.com%2Fhelp-eeeee%2FACL4SSR%2Fmaster%2FClash%2Fconfig%2FACL4SSR_Online_Full_NoAuto.ini&emoji=true&udp=true&sort=false&scv=true&list=true
  橘色云:
    <<: *p
    override:
      additional-suffix: "『\U0001F9E1橘色云』"
    url: https://sub3.91qaq.lol/api/v1/client/subscribe?token=3ac68dbb9b142dded9d90e7ac0b3f692
  Miaona!:
    <<: *p
    override:
      additional-suffix: "『\U0001F49BMiaona!』"
    url: https://miaona.org/api/v1/client/subscribe?token=b1d360cab0dd6185bdb53aed17471a10
  STC:
    <<: *p
    override:
      additional-suffix: "『\U0001F49ASTC』"
    url: https://cop.stc-anycast.com/link/8BiLSMqMRcfg2gFY?sub=2
rule-anchor:
  ipcidr: &ipcidr {type: http, interval: 86400, behavior: ipcidr, format: yaml}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: yaml}
  classical: &classical {type: http, interval: 86400, behavior: classical, format: yaml}
rule-providers:
  reject:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
  icloud:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt
  apple:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt
  google:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt
  proxy:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
  direct:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
  private:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt
  gfw:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt
  tld-not-cn:
    <<: *domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt
  telegramcidr:
    <<: *ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt
  cncidr:
    <<: *ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt
  lancidr:
    <<: *ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
  applications:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt
  OpenAI:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/OpenAI/OpenAI.yaml
  DisneyPlus:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Disney/Disney.yaml
  GoogleFCM:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/GoogleFCM/GoogleFCM.yaml
  Bing:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Bing/Bing.yaml
  OneDrive:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/OneDrive/OneDrive.yaml
  Microsoft:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Microsoft/Microsoft.yaml
  Epic:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Epic/Epic.yaml
  Origin:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Origin/Origin.yaml
  Sony:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Sony/Sony.yaml
  Steam:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Steam/Steam.yaml
  Nintendo:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Nintendo/Nintendo.yaml
  Netflix:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Netflix/Netflix_Classical.yaml
  TikTok:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/TikTok/TikTok.yaml
  HBO:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/HBO/HBO.yaml
  Blizzard:
    <<: *classical
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Blizzard/Blizzard.yaml
  BiliBili:
   <<: *classical
   url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/BiliBili/BiliBili.yaml
  Bahamut:
   <<: *classical
   url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Bahamut/Bahamut.yaml
mixed-port: 7890
profile:
  store-selected: true
  store-fake-ip: true
dns:
  enable: true
  enhanced-mode: fake-ip
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://8.8.8.8/dns-query
    - tls://8.8.8.8:853
    - https://1.1.1.1/dns-query
